(function(){var e,o,a;$(document).ready(function(){return e()}),e=function(){var e,t,n,i,s,g,p,l,r,d,m,h,c,u;for($("#map_page").css("height",$(window).height()-40),i={zoom:14,center:new google.maps.LatLng("48.86","2.34"),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!0,scrollwheel:!1,zoomControl:!0},n=new google.maps.Map(document.getElementById("map_page"),i),t=new google.maps.InfoWindow({maxWidth:400}),g=[],p=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",new google.maps.Size(40,37),new google.maps.Point(0,0),new google.maps.Point(12,35)),h=gon.published,l=0,d=h.length;d>l;l++)e=h[l],s=new google.maps.Marker({position:new google.maps.LatLng(e.latitude,e.longitude),draggable:!1,map:n,icon:"https://maps.gstatic.com/mapfiles/ms2/micons/red-dot.png",shadow:p}),a(n,t,e,s),g.push(s);for(c=gon.draft,u=[],r=0,m=c.length;m>r;r++)e=c[r],s=new google.maps.Marker({position:new google.maps.LatLng(e.latitude,e.longitude),draggable:!1,map:n,icon:"https://maps.gstatic.com/mapfiles/ms2/micons/blue-dot.png",shadow:p}),o(n,t,e,s),u.push(g.push(s));return u},a=function(e,o,a,t){return google.maps.event.addListener(t,"click",function(){var n;return n=null!==a.photo_file_size?"<div class='published_window'><div class='map-image-wrapper'><img src='"+a.photo_file_name+"'></img></div><a href='"+gon.root+"breves/"+a.id+"'><h4>"+a.title+"</h4></a></div>":"<div class='published_window'><div class='map-image-wrapper'><div class='missing-photo thumb'><span>.illustration_attendue</span></div></div><a href='"+gon.root+"breves/"+a.id+"'><h4>"+a.title+"</h4></a></div>",o.setContent(n),o.open(e,t)})},o=function(e,o,a,t){return google.maps.event.addListener(t,"click",function(){var n;return n="<div class='draft_window'><a href='"+gon.root+"breves/"+a.id+"'><h4>"+a.title+"</h4></a></div>",o.setContent(n),o.open(e,t)})}}).call(this);